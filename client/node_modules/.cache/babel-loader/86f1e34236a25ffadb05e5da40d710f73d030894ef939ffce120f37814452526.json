{"ast":null,"code":"import axios from 'axios';\nimport { CREATE_TODO, DELETE_TODO, LOGIN, REGISTER, TODO_LIST } from './apiConstant.js';\nexport const login = async data => {\n  return axios.post(LOGIN, data);\n};\nexport const register = async data => {\n  return axios.post(REGISTER, data);\n};\nexport const creataTodoApi = async data => {\n  let token = getToken();\n  console.log(token, 'token');\n  return axios.post(CREATE_TODO, data, {\n    headers: {\n      auth: token\n    }\n  });\n};\n\n// export const getTodoListApi = async (data) => {\n//     let token =getToken();\n//     console.log(token , 'token')\n//     // console.log(data)\n\n//     return axios.get(TODO_LIST ,data,{\n//         headers:{\n//             auth: token\n//         }\n//     })\n// }\n// import axios from 'axios';\n// import { getToken } from './path/to/tokenService'; // Make sure to import the getToken function\n\nexport const getTodoListApi = async () => {\n  let token = getToken();\n  console.log(token, 'token'); // This logs the token, which is fine for debugging but consider removing for production\n\n  try {\n    const response = await axios.get(TODO_LIST, {\n      headers: {\n        auth: `${token}` // Assuming the API expects a Bearer token\n      }\n    });\n    return response.data; // Returns the data part of the response\n  } catch (error) {\n    console.error('Failed to fetch todo list:', error);\n    throw error; // Re-throw the error for caller handling or further processing\n  }\n};\nexport const deleteTodoApi = async data => {\n  let token = getToken();\n  console.log(token, 'token');\n  return axios.post(DELETE_TODO, data, {\n    headers: {\n      auth: token\n    }\n  });\n};\nexport function getToken() {\n  let user = localStorage.getItem('user');\n  if (!user) throw \"user not present\";\n  const userObj = JSON.parse(user);\n  return userObj.token;\n}","map":{"version":3,"names":["axios","CREATE_TODO","DELETE_TODO","LOGIN","REGISTER","TODO_LIST","login","data","post","register","creataTodoApi","token","getToken","console","log","headers","auth","getTodoListApi","response","get","error","deleteTodoApi","user","localStorage","getItem","userObj","JSON","parse"],"sources":["C:/Users/accou/OneDrive/Desktop/nodeapp/client/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { CREATE_TODO, DELETE_TODO, LOGIN, REGISTER, TODO_LIST } from './apiConstant.js';\r\n\r\nexport const login = async (data) => {\r\n    return axios.post(LOGIN , data )\r\n}\r\n\r\nexport const register = async (data) => {\r\n    return axios.post(REGISTER , data )\r\n}\r\n\r\n\r\nexport const creataTodoApi = async (data) => {\r\n    let token =getToken();\r\n    console.log(token , 'token')\r\n\r\n    return axios.post(CREATE_TODO , data, {\r\n        headers:{\r\n            auth:token\r\n        }\r\n    })\r\n}\r\n\r\n// export const getTodoListApi = async (data) => {\r\n//     let token =getToken();\r\n//     console.log(token , 'token')\r\n//     // console.log(data)\r\n\r\n//     return axios.get(TODO_LIST ,data,{\r\n//         headers:{\r\n//             auth: token\r\n//         }\r\n//     })\r\n// }\r\n// import axios from 'axios';\r\n// import { getToken } from './path/to/tokenService'; // Make sure to import the getToken function\r\n\r\nexport const getTodoListApi = async () => {\r\n    let token = getToken();\r\n    console.log(token, 'token'); // This logs the token, which is fine for debugging but consider removing for production\r\n\r\n    try {\r\n        const response = await axios.get(TODO_LIST, {\r\n            headers: {\r\n                auth: `${token}` // Assuming the API expects a Bearer token\r\n            }\r\n        });\r\n        return response.data; // Returns the data part of the response\r\n    } catch (error) {\r\n        console.error('Failed to fetch todo list:', error);\r\n        throw error; // Re-throw the error for caller handling or further processing\r\n    }\r\n};\r\n\r\n\r\nexport const deleteTodoApi = async (data) => {\r\n    let token = getToken();\r\n    console.log(token , 'token')\r\n\r\n    return axios.post(DELETE_TODO , data , {\r\n        headers:{\r\n            auth:token\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport function getToken() {\r\n    let user = localStorage.getItem('user');\r\n\r\n    if(!user) throw \"user not present\"\r\n    const userObj = JSON.parse(user);\r\n    return userObj.token;\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,WAAW,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,kBAAkB;AAEvF,OAAO,MAAMC,KAAK,GAAG,MAAOC,IAAI,IAAK;EACjC,OAAOP,KAAK,CAACQ,IAAI,CAACL,KAAK,EAAGI,IAAK,CAAC;AACpC,CAAC;AAED,OAAO,MAAME,QAAQ,GAAG,MAAOF,IAAI,IAAK;EACpC,OAAOP,KAAK,CAACQ,IAAI,CAACJ,QAAQ,EAAGG,IAAK,CAAC;AACvC,CAAC;AAGD,OAAO,MAAMG,aAAa,GAAG,MAAOH,IAAI,IAAK;EACzC,IAAII,KAAK,GAAEC,QAAQ,CAAC,CAAC;EACrBC,OAAO,CAACC,GAAG,CAACH,KAAK,EAAG,OAAO,CAAC;EAE5B,OAAOX,KAAK,CAACQ,IAAI,CAACP,WAAW,EAAGM,IAAI,EAAE;IAClCQ,OAAO,EAAC;MACJC,IAAI,EAACL;IACT;EACJ,CAAC,CAAC;AACN,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMM,cAAc,GAAG,MAAAA,CAAA,KAAY;EACtC,IAAIN,KAAK,GAAGC,QAAQ,CAAC,CAAC;EACtBC,OAAO,CAACC,GAAG,CAACH,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;;EAE7B,IAAI;IACA,MAAMO,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,GAAG,CAACd,SAAS,EAAE;MACxCU,OAAO,EAAE;QACLC,IAAI,EAAG,GAAEL,KAAM,EAAC,CAAC;MACrB;IACJ,CAAC,CAAC;IACF,OAAOO,QAAQ,CAACX,IAAI,CAAC,CAAC;EAC1B,CAAC,CAAC,OAAOa,KAAK,EAAE;IACZP,OAAO,CAACO,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAMA,KAAK,CAAC,CAAC;EACjB;AACJ,CAAC;AAGD,OAAO,MAAMC,aAAa,GAAG,MAAOd,IAAI,IAAK;EACzC,IAAII,KAAK,GAAGC,QAAQ,CAAC,CAAC;EACtBC,OAAO,CAACC,GAAG,CAACH,KAAK,EAAG,OAAO,CAAC;EAE5B,OAAOX,KAAK,CAACQ,IAAI,CAACN,WAAW,EAAGK,IAAI,EAAG;IACnCQ,OAAO,EAAC;MACJC,IAAI,EAACL;IACT;EACJ,CAAC,CAAC;AACN,CAAC;AAGD,OAAO,SAASC,QAAQA,CAAA,EAAG;EACvB,IAAIU,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAEvC,IAAG,CAACF,IAAI,EAAE,MAAM,kBAAkB;EAClC,MAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;EAChC,OAAOG,OAAO,CAACd,KAAK;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}